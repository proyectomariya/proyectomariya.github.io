<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Mariya</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"/>
    <link rel="stylesheet" type="text/css" href="css/vendor/reset.css"/>
    <link rel="stylesheet" type="text/css" href="css/style.css"/>

    <script src="js/bodymovin.js"></script>
    <script src="js/microfono.js"></script>
</head>
<body>
    <audio src="audios/fire.mp3" loop autoplay></audio>

    <div class= "container">
        <div class="row">
            <div id="fuego_text" class= "col-sm-12 animation" style="width:200px;height:200px;top:40%;bottom:0;"></div> 
        </div>
        <div class="row">
            <div id="fuego_listening" class= "col-sm-12 animation" style="width:200px;height:200px;top:75%;bottom:0;"></div>
        </div>
        <div class="row">
            <div id="tierra_result" class= "col-sm-12 animation" style="width:380px;height:380px;top:0;bottom:25%;"></div> 
        </div>
        <div class="row">
            <div id="fuego_result" class= "col-sm-12 animation" style="width:380px;height:380px;top:0;bottom:25%;"></div> 
        </div>
        <div class="row">    
            <div id="fuego_processing" class= "col-sm-12 animation" style="width:200px;height:200px;top:75%;bottom:0%;"></div>
        </div>
    </div> 
<script>
    var animData = {
        wrapper: document.getElementById('tierra_result'),
        animType: 'svg',
        loop: true,
        prerender: true,
        autoplay: true,
        path: 'json/data_static_fuego.json'
    };
    var anim = bodymovin.loadAnimation(animData);
    bodymovin.setSubframeRendering(false);
</script>
<script>
    var animData = {
        wrapper: document.getElementById('fuego_text'),
        animType: 'svg',
        loop: false,
        prerender: true,
        autoplay: true,
        path: 'json/data_fuego_text.json'
    };
    var anim = bodymovin.loadAnimation(animData);
    bodymovin.setSubframeRendering(false);
</script>

<script>
    var animData = {
        wrapper: document.getElementById('fuego_listening'),
        animType: 'svg',
        loop: true,
        prerender: true,
        autoplay: true,
        path: 'json/data_listening.json'
    };
    var anim = bodymovin.loadAnimation(animData);
    bodymovin.setSubframeRendering(false);
</script>

<script src="//cdnjs.cloudflare.com/ajax/libs/annyang/2.5.0/annyang.min.js"></script>
<script>
if (annyang) {
  // Let's define our first command. First the text we expect, and then the function it should call
    var commands = {
        'casa de': function() {
            var animData = {
                wrapper: document.getElementById('fuego_result'),
                animType: 'svg',
                loop: true,
                prerender: true,
                autoplay: true,
                path: 'json/data_fuego_result.json'
            };
            var anim = bodymovin.loadAnimation(animData);
            bodymovin.setSubframeRendering(false);

            var link = document.getElementById('fuego_listening');
            link.style.display = 'none'; 

            var animData = {
                wrapper: document.getElementById('fuego_processing'),
                animType: 'svg',
                loop: false,
                prerender: true,
                autoplay: true,
                path: 'json/data_processing.json'
            };
            var anim = bodymovin.loadAnimation(animData);
            bodymovin.setSubframeRendering(false);

            var delay=6100;
            setTimeout(function() {
                document.location.href = "#"
            }, delay);
        }
    };

    // Add our commands to annyang
    annyang.addCommands(commands);

    annyang.addCallback('result', function(phrases) {
        console.log("I think the user said: ", phrases[0]);
        console.log("But then again, it could be any of the following: ", phrases);
    });

    // Start listening. You can call this here, or attach this call to an event, button, etc.
    annyang.start();
}
</script>
</body>
</html>